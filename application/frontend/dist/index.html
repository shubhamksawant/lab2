<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ® Humor Memory Game - DevOps Learning Edition ğŸ˜‚</title>
    <meta
      name="description"
      content="A fun memory card game with funny emojis and jokes, Made for DevOps learning!"
    />
    <meta name="author" content="DevOps Learning Team - Osomudeya Zudonu" />

    <!-- Favicon -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ®</text></svg>"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="/styles/main.css?v=20250819" />

    <!-- Configuration Script -->
    <script>
      // Set API base URL - handle both localhost and domain access
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        // Running in browser - connect to localhost
        window.API_BASE_URL = 'http://backend:3001/api';
      } else if (window.location.hostname === 'gameapp.games') {
        // Running via domain - use same domain for API
        window.API_BASE_URL = 'https://gameapp.games:8443/api';
      } else {
        // Running in container - connect to backend service
        window.API_BASE_URL = 'http://backend:3001/api';
      }
      console.log('ğŸ”§ API Base URL set to:', window.API_BASE_URL);
      console.log('ğŸŒ Current hostname:', window.location.hostname);
      console.log('ğŸ”— Current URL:', window.location.href);
      console.log('ğŸ“± User Agent:', navigator.userAgent);
      
      // Test API connection immediately
      console.log('ğŸ§ª Testing API connection...');
      fetch(window.API_BASE_URL)
        .then(response => {
          console.log('âœ… Initial API test successful:', response.status);
          return response.json();
        })
        .then(data => {
          console.log('ğŸ“¡ API response:', data.message);
        })
        .catch(error => {
          console.error('âŒ Initial API test failed:', error);
        });
    </script>

    <!-- Preload critical resources -->
    <link rel="preload" href="/scripts/game.js?v=20250819-0108" as="script" />
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
      <div class="loading-content">
        <div class="loading-spinner">ğŸ®</div>
        <h2>Loading Humor Memory Game...</h2>
        <p>Preparing the funniest cards for you! ğŸ˜‚</p>
        <div class="loading-bar">
          <div class="loading-progress"></div>
        </div>
      </div>
    </div>

    <!-- Main Game Container -->
    <div id="gameContainer" class="game-container" style="display: none">
      <!-- Header -->
      <header class="game-header">
        <div class="header-content">
          <h1 class="game-title">
            <span class="title-emoji">ğŸ®</span>
            Humor Memory Game
            <span class="title-emoji">ğŸ˜‚</span>
          </h1>
          <p class="game-subtitle">A DevOps Learning Adventure!</p>
        </div>

        <!-- Navigation Tabs -->
        <nav class="game-nav">
          <button class="nav-btn active" data-tab="game">ğŸ¯ Game</button>
          <button class="nav-btn" data-tab="leaderboard">ğŸ† Leaderboard</button>
          <button class="nav-btn" data-tab="stats">ğŸ“Š My Stats</button>
          <button class="nav-btn" data-tab="about">â„¹ï¸ About</button>
        </nav>
      </header>

      <!-- Game Tab -->
      <section id="gameTab" class="tab-content active">
        <!-- User Setup -->
        <div id="userSetup" class="user-setup">
          <div class="setup-card">
            <h2>ğŸª Welcome to the Memory Circus!</h2>
            <p>Enter your username to start the hilarious memory challenge!</p>

            <div class="input-group">
              <label for="usernameInput">ğŸ‘¤ Username:</label>
              <input
                type="text"
                id="usernameInput"
                placeholder="Enter your username..."
                maxlength="50"
                autocomplete="username"
              />
            </div>

            <div class="input-group">
              <label for="difficultySelect">ğŸ¯ Difficulty:</label>
              <select id="difficultySelect">
                <option value="easy">ğŸ˜Š Easy (4x4 - 16 cards)</option>
                <option value="medium">ğŸ¤” Medium (5x4 - 20 cards)</option>
                <option value="hard">ğŸ˜¤ Hard (6x4 - 24 cards)</option>
                <option value="expert">ğŸ¤¯ Expert (6x5 - 30 cards)</option>
              </select>
            </div>

            <div class="input-group">
              <label>ğŸ¨ Emoji Categories (optional):</label>
              <div class="category-selector">
                <label class="category-option">
                  <input type="checkbox" value="classic" /> ğŸ˜‚ Classic
                </label>
                <label class="category-option">
                  <input type="checkbox" value="food" /> ğŸ• Food
                </label>
                <label class="category-option">
                  <input type="checkbox" value="space" /> ğŸš€ Space
                </label>
                <label class="category-option">
                  <input type="checkbox" value="fantasy" /> ğŸ¦„ Fantasy
                </label>
                <label class="category-option">
                  <input type="checkbox" value="tech" /> ğŸ¤– Tech
                </label>
              </div>
            </div>

            <button id="startGameBtn" class="btn btn-primary">
              ğŸš€ Start Game!
            </button>
          </div>
        </div>

        <!-- Game Board -->
        <div id="gameBoard" class="game-board" style="display: none">
          <!-- Game Info Bar -->
          <div class="game-info">
            <div class="info-item">
              <span class="info-label">ğŸ‘¤ Player:</span>
              <span id="playerName" class="info-value">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">ğŸ¯ Score:</span>
              <span id="gameScore" class="info-value">0</span>
            </div>
            <div class="info-item">
              <span class="info-label">ğŸ”¢ Moves:</span>
              <span id="gameMoves" class="info-value">0</span>
            </div>
            <div class="info-item">
              <span class="info-label">â±ï¸ Time:</span>
              <span id="gameTime" class="info-value">00:00</span>
            </div>
            <div class="info-item">
              <span class="info-label">ğŸƒ Pairs:</span>
              <span id="foundPairs" class="info-value">0</span>
              <span class="info-separator">/</span>
              <span id="totalPairs" class="info-value">8</span>
            </div>
          </div>

          <!-- Cards Grid -->
          <div id="cardsGrid" class="cards-grid">
            <!-- Cards will be dynamically generated here -->
          </div>

          <!-- Game Controls -->
          <div class="game-controls">
            <button id="pauseBtn" class="btn btn-secondary">â¸ï¸ Pause</button>
            <button id="newGameBtn" class="btn btn-primary">ğŸ”„ New Game</button>
            <button id="quitBtn" class="btn btn-danger">âŒ Quit</button>
          </div>

          <!-- Message Display -->
          <div id="gameMessage" class="game-message" style="display: none">
            <div class="message-content">
              <div class="message-emoji">ğŸ‰</div>
              <div class="message-text">Great match!</div>
            </div>
          </div>
        </div>

        <!-- Game Complete Modal -->
        <div id="gameCompleteModal" class="modal" style="display: none">
          <div class="modal-content">
            <div class="modal-header">
              <h2>ğŸ‰ Game Complete! ğŸ†</h2>
              <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
              <div class="completion-stats">
                <div class="stat-item">
                  <div class="stat-emoji">ğŸ¯</div>
                  <div class="stat-label">Final Score</div>
                  <div id="finalScore" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                  <div class="stat-emoji">â±ï¸</div>
                  <div class="stat-label">Time</div>
                  <div id="finalTime" class="stat-value">00:00</div>
                </div>
                <div class="stat-item">
                  <div class="stat-emoji">ğŸ”¢</div>
                  <div class="stat-label">Moves</div>
                  <div id="finalMoves" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                  <div class="stat-emoji">ğŸª</div>
                  <div class="stat-label">Accuracy</div>
                  <div id="finalAccuracy" class="stat-value">0%</div>
                </div>
              </div>

              <div id="performanceRating" class="performance-rating">
                <div class="rating-emoji">â­</div>
                <div class="rating-text">Great Job!</div>
              </div>

              <div
                id="achievementsList"
                class="achievements-list"
                style="display: none"
              >
                <h3>ğŸ† Achievements Unlocked!</h3>
                <div class="achievements-container">
                  <!-- Achievements will be populated here -->
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button id="playAgainBtn" class="btn btn-primary">
                ğŸ® Play Again
              </button>
              <button id="viewLeaderboardBtn" class="btn btn-secondary">
                ğŸ† Leaderboard
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Leaderboard Tab -->
      <section id="leaderboardTab" class="tab-content">
        <div class="leaderboard-container">
          <h2>ğŸ† Memory Champions Leaderboard</h2>

          <div class="leaderboard-controls">
            <select id="leaderboardFilter">
              <option value="all">ğŸŒŸ All Time</option>
              <option value="week">ğŸ“… This Week</option>
              <option value="month">ğŸ“† This Month</option>
            </select>
            <button id="refreshLeaderboard" class="btn btn-secondary">
              ğŸ”„ Refresh
            </button>
          </div>

          <div id="leaderboardContent" class="leaderboard-content">
            <div class="loading-spinner">Loading leaderboard... ğŸ“Š</div>
          </div>
        </div>
      </section>

      <!-- Stats Tab -->
      <section id="statsTab" class="tab-content">
        <div class="stats-container">
          <h2>ğŸ“Š Your Performance Statistics</h2>

          <div id="userStatsContent" class="user-stats-content">
            <div class="stats-placeholder">
              <div class="placeholder-emoji">ğŸ“ˆ</div>
              <p>Play a game to see your stats here!</p>
              <button class="btn btn-primary" onclick="switchTab('game')">
                ğŸ® Start Playing
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- About Tab -->
      <section id="aboutTab" class="tab-content">
        <div class="about-container">
          <h2>â„¹ï¸ About Humor Memory Game</h2>

          <div class="about-content">
            <div class="about-section">
              <h3>ğŸ® What is this game?</h3>
              <p>
                A fun memory card matching game featuring hilarious emojis and
                jokes! Perfect for testing your memory skills while having a
                good laugh.
              </p>
            </div>

            <div class="about-section">
              <h3>ğŸ¯ How to Play</h3>
              <ol>
                <li>ğŸª Enter your username and select difficulty</li>
                <li>ğŸƒ Click cards to flip them and find matching pairs</li>
                <li>âš¡ Match cards quickly for bonus points!</li>
                <li>ğŸ† Complete all pairs to finish the game</li>
                <li>ğŸ“Š Check the leaderboard to see your ranking!</li>
              </ol>
            </div>

            <div class="about-section">
              <h3>ğŸ”¥ Scoring System</h3>
              <ul>
                <li>ğŸ¯ Base points per match (varies by difficulty)</li>
                <li>âš¡ Speed bonus for quick matches</li>
                <li>ğŸ’ Perfect game bonus (no wrong moves)</li>
                <li>ğŸ”¥ Streak bonus for consecutive matches</li>
              </ul>
            </div>

            <div class="about-section">
              <h3>ğŸ› ï¸ Built for DevOps Learning</h3>
              <p>This application demonstrates:</p>
              <ul>
                <li>ğŸ³ Docker containerization</li>
                <li>ğŸ—„ï¸ PostgreSQL database integration</li>
                <li>âš¡ Redis caching</li>
                <li>ğŸŒ RESTful API design</li>
                <li>â˜ï¸ Cloud-ready architecture</li>
                <li>ğŸ”’ Security best practices</li>
              </ul>
            </div>

            <div class="about-section">
              <h3>ğŸ’» Tech Stack</h3>
              <div class="tech-stack">
                <span class="tech-badge">Node.js</span>
                <span class="tech-badge">Express</span>
                <span class="tech-badge">PostgreSQL</span>
                <span class="tech-badge">Redis</span>
                <span class="tech-badge">Docker</span>
                <span class="tech-badge">HTML5</span>
                <span class="tech-badge">CSS3</span>
                <span class="tech-badge">JavaScript</span>
              </div>
            </div>

            <div class="about-section">
              <h3>ğŸ‰ Fun Facts</h3>
              <ul>
                <li>ğŸ˜‚ Over 30 different funny emojis to match!</li>
                <li>
                  ğŸ­ Random success and failure messages for entertainment
                </li>
                <li>ğŸ† Real-time leaderboard with global rankings</li>
                <li>ğŸ“Š Detailed statistics and achievement system</li>
                <li>âš¡ Optimized with Redis caching for speed</li>
                <li>ğŸ”’ Secure and scalable architecture</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal error-modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2>ğŸ˜… Oops! Something went wrong</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="error-content">
            <div class="error-emoji">ğŸ¤”</div>
            <div id="errorMessage" class="error-message">
              An unexpected error occurred. Please try again!
            </div>
            <div class="error-suggestion">
              ğŸ’¡ Try refreshing the page or check your internet connection.
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="retryBtn" class="btn btn-primary">ğŸ”„ Try Again</button>
          <button class="modal-close btn btn-secondary">âŒ Close</button>
        </div>
      </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification" style="display: none">
      <div class="notification-content">
        <div class="notification-emoji">â„¹ï¸</div>
        <div class="notification-message">Notification message</div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="game-footer">
      <div class="footer-content">
        <p>
          ğŸ® Humor Memory Game v1.0 | Built with â¤ï¸ for DevOps Learning |
          <a
            href="https://github.com/your-org/humor-memory-game"
            target="_blank"
            >ğŸ“– View on GitHub</a
          >
        </p>
        <p class="footer-subtitle">
          ğŸš€ Perfect for learning Docker, Kubernetes, CI/CD, and cloud
          deployment!
        </p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="/scripts/game.js?v=20250819-0108"></script>

    <!-- Service Worker for PWA (optional) -->
    <script>
      // Register service worker for offline capability
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker
          .register('/sw.js')
          .then((registration) =>
            console.log('ğŸ”§ SW registered:', registration)
          )
          .catch((error) => console.log('âŒ SW registration failed:', error));
      }
    </script>
  </body>
</html>
